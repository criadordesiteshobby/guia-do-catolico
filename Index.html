mw    <!-- Conta -->
    <section id="accountPage" class="card" style="display:none">
      <h2>Conta</h2>
      <div id="accountContent">
        <p id="acctInfo" class="small">Sem usu√°rio logado.</p>
        <div style="display:flex; gap:8px; margin-top:8px;">
          <button id="logoutBtn" style="background:#ff6b6b;color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;">Sair</button>
        </div>
      </div>
    </section>

  </main>

  <!-- Modal login simples -->
  <div id="loginModal" style="display:none; position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,.4); align-items:center; justify-content:center; z-index:80;">
    <div style="background:white; padding:20px; border-radius:12px; width:340px;">
      <h3 style="margin:0 0 8px">Login / Cadastro</h3>
      <input id="emailInput" placeholder="Email" style="width:100%;padding:8px;margin-bottom:8px;border-radius:8px;border:1px solid #ddd;" />
      <input id="pwdInput" type="password" placeholder="Senha" style="width:100%;padding:8px;margin-bottom:8px;border-radius:8px;border:1px solid #ddd;" />
      <div style="display:flex; gap:8px;">
        <button id="doLogin" style="flex:1;background:var(--gold);border:none;padding:10px;border-radius:8px;font-weight:800;cursor:pointer;">Entrar</button>
        <button id="doRegister" style="flex:1;background:#ddd;border:none;padding:10px;border-radius:8px;cursor:pointer;">Cadastrar</button>
      </div>
      <div style="margin-top:8px;text-align:right">
        <button id="closeLogin" style="background:transparent;border:none;color:var(--muted);cursor:pointer">Fechar</button>
      </div>
      <p id="loginMsg" class="small" style="color:crimson"></p>
    </div>
  </div>

  <script type="module">
    /* =============================
       INSTRU√á√ïES FIREBASE (opcional)
       =============================
       - Se voc√™ quiser usar o Firebase "REAL" (Auth + Firestore), cole suas chaves abaixo e
         descomente a inicializa√ß√£o das libs Firebase (linhas indicadas).
       - Se N√ÉO colar, o site usa um modo SIMULADO (localStorage) para testar tudo na hora.
    */

    // -------------------------
    // COLE AQUI SUAS CHAVES FIREBASE
    // -------------------------
    const firebaseConfig = {
      // Exemplo:
      // apiKey: "AIzaSy....",
      // authDomain: "seu-projeto.firebaseapp.com",
      // projectId: "seu-projeto",
      // storageBucket: "seu-projeto.appspot.com",
      // messagingSenderId: "1234567890",
      // appId: "1:123456:web:abcdef",
    };

    // DETECTA se o usu√°rio colou config (checa apiKey como exemplo)
    const hasFirebaseConfig = !!(firebaseConfig && firebaseConfig.apiKey);

    // Se o dev colar as chaves, as imports abaixo ser√£o usadas.
    // OBS: As linhas de import est√£o comentadas para evitar erros se n√£o houver config.
    let firebase = null;
    let auth = null;
    let db = null;
    if (hasFirebaseConfig) {
      // Se quiser ativar Firebase real, remova os coment√°rios e certifique-se de colar as chaves above.
      // import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      // import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
      // import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, doc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
      //
      // const app = initializeApp(firebaseConfig);
      // auth = getAuth(app);
      // db = getFirestore(app);
      //
      // // (Opcional) setPersistence(auth, browserLocalPersistence);
      //
      // firebase = { app, auth, db };
    }

    /* =============================
       FUN√á√ïES DE NAVEGA√á√ÉO / MENU
       ============================= */
    const sidebar = document.getElementById('sidebar');
    const main = document.getElementById('main');
    const toggleBtn = document.getElementById('toggleMenu');
    const navButtons = document.querySelectorAll('.nav-list button');

    function openSidebar(open=true){
      if(open){
        sidebar.classList.add('open');
        main.classList.add('shift');
      } else {
        sidebar.classList.remove('open');
        main.classList.remove('shift');
      }
    }

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      main.classList.toggle('shift');
    });

    navButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const target = e.currentTarget.dataset.target;
        showSection(target);
        // fecha sidebar em telas pequenas
        if(window.innerWidth < 920) openSidebar(false);
      });
    });

    function showSection(id){
      document.querySelectorAll('main section').forEach(s => s.style.display = 'none');
      const el = document.getElementById(id);
      if(el) el.style.display = 'block';
      // foco simples
      window.scrollTo({top:0, behavior:'smooth'});
    }

    // Inicial: mostrar p√°gina principal
    showSection('mainHome');

    /* =============================
       LOGIN / CONTA (simulado ou firebase)
       - Se hasFirebaseConfig true e libs ativadas, substitua
         pelas chamadas reais do Firebase Auth.
       ============================= */
    let currentUser = null;

    const loginModal = document.getElementById('loginModal');
    const openLogin = document.getElementById('openLogin');
    const closeLogin = document.getElementById('closeLogin');
    const doLogin = document.getElementById('doLogin');
    const doRegister = document.getElementById('doRegister');
    const emailInput = document.getElementById('emailInput');
    const pwdInput = document.getElementById('pwdInput');
    const loginMsg = document.getElementById('loginMsg');
    const userBadge = document.getElementById('userBadge');
    const acctInfo = document.getElementById('acctInfo');
    const logoutBtn = document.getElementById('logoutBtn');

    openLogin.addEventListener('click', () => {
      loginModal.style.display = 'flex';
      loginMsg.textContent = '';
    });
    closeLogin.addEventListener('click', () => loginModal.style.display = 'none');

    // UTIL: salva usu√°rio simulado no localStorage
    function saveSimUser(email, pwd){
      const users = JSON.parse(localStorage.getItem('sim_users') || '{}');
      users[email] = { email, pwd };
      localStorage.setItem('sim_users', JSON.stringify(users));
    }
    function checkSimUser(email, pwd){
      const users = JSON.parse(localStorage.getItem('sim_users') || '{}');
      return users[email] && users[email].pwd === pwd;
    }

    doRegister.addEventListener('click', () => {
      const email = emailInput.value.trim();
      const pwd = pwdInput.value;
      if(!email || !pwd){ loginMsg.textContent = 'Preencha email e senha.'; return; }
      // No modo real, aqui chamaria createUserWithEmailAndPassword
      if(hasFirebaseConfig){ loginMsg.textContent = 'Ative Firebase no c√≥digo para registrar.'; return; }
      saveSimUser(email, pwd);
      currentUser = { email };
      loginModal.style.display = 'none';
      updateUIOnLogin();
    });

    doLogin.addEventListener('click', () => {
      const email = emailInput.value.trim();
      const pwd = pwdInput.value;
      if(!email || !pwd){ loginMsg.textContent = 'Preencha email e senha.'; return; }
      if(hasFirebaseConfig){ loginMsg.textContent = 'Ative Firebase no c√≥digo para logar real.'; return; }
      if(checkSimUser(email, pwd)){
        currentUser = { email };
        loginModal.style.display = 'none';
        updateUIOnLogin();
      } else {
        loginMsg.textContent = 'Usu√°rio n√£o encontrado ou senha incorreta.';
      }
    });

    logoutBtn.addEventListener('click', () => {
      // real: signOut(auth)
      currentUser = null;
      updateUIOnLogin();
      alert('Voc√™ saiu.');
    });

    function updateUIOnLogin(){
      if(currentUser){
        userBadge.textContent = currentUser.email;
        acctInfo.textContent = `Logado como: ${currentUser.email}`;
        openLogin.style.display = 'none';
      } else {
        userBadge.textContent = 'N√£o logado';
        acctInfo.textContent = 'Sem usu√°rio logado.';
        openLogin.style.display = 'inline-block';
      }
    }
    updateUIOnLogin();

    /* =============================
       CHAT (modo real com Firestore se ativado; fallback localStorage)
       ============================= */
    const messagesDiv = document.getElementById('messages');
    const msgInput = document.getElementById('msgInput');
    const sendBtn = document.getElementById('sendBtn');

    // Simula√ß√£o: mensagens em localStorage
    function loadSimMessages(){
      return JSON.parse(localStorage.getItem('sim_mensagens') || '[]');
    }
    function saveSimMessage(msg){
      const arr = loadSimMessages();
      arr.push(msg);
      localStorage.setItem('sim_mensagens', JSON.stringify(arr));
    }

    function renderMessages(msgs){
      messagesDiv.innerHTML = '';
      msgs.forEach((m, idx) => {
        const div = document.createElement('div');
        div.className = 'message';
        div.dataset.idx = idx;
        const timeStr = new Date(m.horario).toLocaleTimeString();
        div.innerHTML = `
          <div style="flex:1">
            <div class="meta"><strong>${escapeHtml(m.nome)}</strong></div>
            <div class="text">${escapeHtml(m.texto)}</div>
            <div class="reactions" data-reactions></div>
          </div>
          <div class="msg-actions">
            <button title="Copiar" data-action="copy">üìã</button>
            <button title="Reagir" data-action="react">‚ù§Ô∏è</button>
            <button title="Responder" data-action="reply">‚Ü©Ô∏è</button>
            <button title="Ver hor√°rio" data-action="time">üïí</button>
          </div>
        `;
        // render reactions if houver
        const reactionsEl = div.querySelector('[data-reactions]');
        if(m.reacoes){
          Object.entries(m.reacoes).forEach(([emoji, count]) => {
            const span = document.createElement('span');
            span.textContent = `${emoji} ${count}`;
            reactionsEl.appendChild(span);
          });
        }
        // attach events
        div.querySelectorAll('.msg-actions button').forEach(b => {
          b.addEventListener('click', (ev) => {
            ev.stopPropagation();
            const action = b.dataset.action;
            handleMsgAction(action, m, idx, div);
          });
        });

        // long press support (mobile) -> show small popup (we use the same actions)
        let pressTimer = null;
        div.addEventListener('touchstart', (e) => {
          pressTimer = setTimeout(()=> {
            // show actions by simulating clicking first action (or custom menu)
            // we will open a small contextual menu (use native prompt for simplicity)
            showContextMenuForMessage(m, idx, div);
          }, 600);
        });
        div.addEventListener('touchend', ()=> clearTimeout(pressTimer));
        div.addEventListener('mousedown', (e)=> {
          pressTimer = setTimeout(()=> {
            showContextMenuForMessage(m, idx, div);
          }, 700);
        });
        div.addEventListener('mouseup', ()=> clearTimeout(pressTimer));

        messagesDiv.appendChild
