<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal do CatÃ³lico</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #fffdf5;
      color: #333;
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(90deg, #fff, #f0c93d, #d9ff91);
      color: #222;
      text-align: center;
      padding: 1.5rem;
      font-size: 1.8rem;
      font-weight: 700;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    section {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      text-align: center;
    }
    h2 {
      color: #c8a600;
      margin-bottom: 1rem;
    }
    button {
      background-color: #d9ff91;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }
    button:hover {
      background-color: #f0c93d;
    }
    .flag {
      font-size: 2rem;
    }
    .card {
      background: #fff;
      border-radius: 15px;
      padding: 1rem;
      margin: 1rem 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    footer {
      background-color: #f0c93d;
      padding: 1rem;
      text-align: center;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <header>ðŸ‡»ðŸ‡¦ Portal do CatÃ³lico ðŸ‡»ðŸ‡¦</header>

  <!-- Login Section -->
  <section id="loginSection">
    <h2>Login / Cadastro</h2>
    <input type="email" id="email" placeholder="Seu email"><br><br>
    <input type="password" id="password" placeholder="Sua senha"><br><br>
    <button id="registerBtn">Cadastrar</button>
    <button id="loginBtn">Entrar</button>
    <button id="logoutBtn" style="display:none;">Sair</button>
  </section>

  <!-- Bandeiras -->
  <section id="flagsSection" style="display:none;">
    <h2>Coletar Bandeira ðŸ‡»ðŸ‡¦</h2>
    <div class="card">
      <p>VocÃª pode coletar 1 bandeira a cada 1 hora!</p>
      <button id="collectBtn">Coletar agora</button>
      <p id="timer">PrÃ³xima coleta: disponÃ­vel</p>
      <p>Total de bandeiras: <span id="flagCount">0</span></p>
    </div>
  </section>

  <!-- OraÃ§Ãµes -->
  <section>
    <h2>OraÃ§Ãµes</h2>
    <div class="card">
      <p><strong>Pai Nosso</strong></p>
      <p>Pai nosso, que estais no cÃ©u, santificado seja o vosso nome...</p>
    </div>
    <div class="card">
      <p><strong>Ave Maria</strong></p>
      <p>Ave Maria, cheia de graÃ§a, o Senhor Ã© convosco...</p>
    </div>
  </section>

  <!-- Santos -->
  <section>
    <h2>Santos e Curiosidades</h2>
    <div class="card">
      <p><strong>SÃ£o Francisco de Assis</strong></p>
      <p>Padroeiro dos animais e da natureza. Exemplo de humildade e amor.</p>
    </div>
    <div class="card">
      <p><strong>Santa Rita de CÃ¡ssia</strong></p>
      <p>Conhecida como a santa das causas impossÃ­veis.</p>
    </div>
  </section>

  <!-- NotÃ­cias -->
  <section>
    <h2>NotÃ­cias CatÃ³licas</h2>
    <div class="card">
      <p><strong>Papa Francisco fala sobre paz e esperanÃ§a</strong></p>
      <p>Mensagem recente incentiva a oraÃ§Ã£o e o perdÃ£o entre os povos.</p>
    </div>
  </section>

  <footer>Â© 2025 Portal do CatÃ³lico â€¢ Feito com fÃ© ðŸ‡»ðŸ‡¦</footer>

  <!-- Firebase SDK -->
  <script type="module">
    // Importar SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

    // ðŸ”§ COLE SUA CONFIG DO FIREBASE AQUI
    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "SEU_AUTH_DOMAIN",
      projectId: "SEU_PROJECT_ID",
      storageBucket: "SEU_STORAGE_BUCKET",
      messagingSenderId: "SEU_MESSAGING_SENDER_ID",
      appId: "SEU_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Elementos
    const registerBtn = document.getElementById("registerBtn");
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const flagsSection = document.getElementById("flagsSection");
    const loginSection = document.getElementById("loginSection");
    const collectBtn = document.getElementById("collectBtn");
    const flagCountEl = document.getElementById("flagCount");
    const timerEl = document.getElementById("timer");

    let flagCount = 0;
    let nextCollect = 0;

    registerBtn.onclick = async () => {
      const email = emailInput.value;
      const password = passwordInput.value;
      try {
        await createUserWithEmailAndPassword(auth, email, password);
        alert("Conta criada!");
      } catch (e) {
        alert(e.message);
      }
    };

    loginBtn.onclick = async () => {
      const email = emailInput.value;
      const password = passwordInput.value;
      try {
        await signInWithEmailAndPassword(auth, email, password);
        alert("Login realizado!");
      } catch (e) {
        alert(e.message);
      }
    };

    logoutBtn.onclick = async () => {
      await signOut(auth);
    };

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        loginSection.style.display = "none";
        flagsSection.style.display = "block";
        logoutBtn.style.display = "inline";
        const docRef = doc(db, "usuarios", user.uid);
        const docSnap = await getDoc(docRef);
        if (docSnap.exists()) {
          flagCount = docSnap.data().bandeiras || 0;
          flagCountEl.textContent = flagCount;
        }
      } else {
        loginSection.style.display = "block";
        flagsSection.style.display = "none";
        logoutBtn.style.display = "none";
      }
    });

    collectBtn.onclick = async () => {
      const now = Date.now();
      if (now < nextCollect) {
        alert("Espere o tempo acabar para coletar novamente.");
        return;
      }
      flagCount++;
      flagCountEl.textContent = flagCount;
      nextCollect = now + 3600000; // 1 hora
      const user = auth.currentUser;
      if (user) await setDoc(doc(db, "usuarios", user.uid), { bandeiras: flagCount });
      alert("Bandeira coletada ðŸ‡»ðŸ‡¦!");
    };

    // Atualiza contador de tempo
    setInterval(() => {
      const diff = nextCollect - Date.now();
      if (diff > 0) {
        const min = Math.floor(diff / 60000);
        const sec = Math.floor((diff % 60000) / 1000);
        timerEl.textContent = `PrÃ³xima coleta: ${min}m ${sec}s`;
      } else {
        timerEl.textContent = "PrÃ³xima coleta: disponÃ­vel";
      }
    }, 1000);
  </script>
</body>
  </html>
